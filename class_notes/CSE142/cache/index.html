
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../cache_aware_programming/">
      
      
      <link rel="icon" href="../../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>Cache - Docs</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      

  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M17%2013h-4v4h-2v-4H7v-2h4V7h2v4h4m-5-9A10%2010%200%200%200%202%2012a10%2010%200%200%200%2010%2010%2010%2010%200%200%200%2010-10A10%2010%200%200%200%2012%202%22/%3E%3C/svg%3E');}</style>


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Fira Code"}</style>
      
    
    
      <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    
      <link rel="stylesheet" href="../../../styles/fallback.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#cache" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Docs" class="md-header__button md-logo" aria-label="Docs" data-md-component="logo">
      
  <img src="../../../assets/icon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Cache
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="teal"  aria-label="Dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="amber"  aria-label="Light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Docs" class="md-nav__button md-logo" aria-label="Docs" data-md-component="logo">
      
  <img src="../../../assets/icon.png" alt="logo">

    </a>
    Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../home/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    LeetCode
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            LeetCode
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../leetcode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sorting
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Sorting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../leetcode/sorting/sort_list/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    sort linked list
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Notes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Notes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Angular
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Angular
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../notes/angular/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2_2" id="__nav_4_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Platform
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_2">
            <span class="md-nav__icon md-icon"></span>
            Platform
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../notes/angular/cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CLI
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_3" >
        
          
          <label class="md-nav__link" for="__nav_4_2_3" id="__nav_4_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Components
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_3">
            <span class="md-nav__icon md-icon"></span>
            Components
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../notes/angular/component/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Components
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_3_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2_3_2" id="__nav_4_2_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Material Components
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_2_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_3_2">
            <span class="md-nav__icon md-icon"></span>
            Material Components
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../notes/angular/angular_material/material_component/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../notes/angular/angular_material/form_control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Form Control
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../notes/angular/httpClient/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HTTP Client
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../notes/angular/signal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Signals
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Typescript
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Typescript
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../notes/typescript/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../notes/typescript/decorator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Decorator
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Javascript
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Javascript
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../notes/javascript/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../notes/javascript/async_await.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Async/Await
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../notes/javascript/closures.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Closures
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../notes/javascript/prototypes.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prototypes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_4_5" id="__nav_4_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Data Structures
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4_5">
            <span class="md-nav__icon md-icon"></span>
            Data Structures
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../notes/javascript/ds/arrays/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Arrays
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    MKDocs
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            MKDocs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../notes/mkdocs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../notes/mkdocs/common_errors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Common Errors
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Class Notes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Class Notes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" checked>
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    CSE 142
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            CSE 142
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Cache
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Cache
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#common-system-time" class="md-nav__link">
    <span class="md-ellipsis">
      common system time
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#classic-von-neuman-computer" class="md-nav__link">
    <span class="md-ellipsis">
      classic von neuman computer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="classic von neuman computer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#memory-wall" class="md-nav__link">
    <span class="md-ellipsis">
      memory wall
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#memory-access-is-expensive" class="md-nav__link">
    <span class="md-ellipsis">
      Memory access is expensive
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Memory access is expensive">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#memory-techs" class="md-nav__link">
    <span class="md-ellipsis">
      memory techs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#calculate-for-cpi" class="md-nav__link">
    <span class="md-ellipsis">
      calculate for CPI:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimize-memory-access-by-parallelism-amdahls-law" class="md-nav__link">
    <span class="md-ellipsis">
      optimize memory access by parallelism (Amdahl’s law)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cache_aware_programming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cache Aware Programming
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pipelining
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../parallelism/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Parallelism
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ECE 140B
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            ECE 140B
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ECE140B/team_proposal.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Team Proposal
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    CSE 120
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            CSE 120
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CSE120/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CSE120/OS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OS
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Temp
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Temp
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../jobs/ADRs/NHCS-622.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="cache">Cache</h1>
<p>Created: February 13, 2025 4:03 AM
Tags: Computer Hardware</p>
<aside>
💡

1 byte = 8 bits, 1 hex = 1 nibble = 4 bits, 1 KB = 1024 Bytes, 1 cycle = 0.3 nanoseconds

</aside>

<aside>
💡

index of array is essentially offset of memory location, so they start with 0

</aside>

<ul>
<li>cache should store Frequently accessed, computationally expensive, or slow-to-retrieve data (e.g., database queries, API responses, session data).</li>
<li>cache is stored in hashmap (key value pairs)</li>
<li>cache is put in different storage based on speed and persistence</li>
<li>check if key exists before query data from memory</li>
<li>use LRU (least recently used), or LFU (least frequently used), or TTL (time to live) to manage cache</li>
<li>if cache miss, retrieve from original mem location</li>
</ul>
<h3 id="common-system-time">common system time</h3>
<table>
<thead>
<tr>
<th>System Event</th>
<th>Actual Latency</th>
<th>Scaled Latency</th>
<th>typical CPI</th>
</tr>
</thead>
<tbody>
<tr>
<td>One CPU cycle</td>
<td>0.3 ns</td>
<td>1 second</td>
<td>1 cycle</td>
</tr>
<tr>
<td>Level 1 cache access</td>
<td>0.5 ns</td>
<td>2 seconds</td>
<td>4 cycles</td>
</tr>
<tr>
<td>Level 2 cache access</td>
<td>2.8 ns</td>
<td>10 seconds</td>
<td>25 cycles</td>
</tr>
<tr>
<td>Level 3 cache access</td>
<td>28 ns</td>
<td>2 minutes</td>
<td>50 cycles</td>
</tr>
<tr>
<td>Main memory access (DDR DIMM)</td>
<td>100 ns</td>
<td>7 minutes</td>
<td>400 cycles</td>
</tr>
<tr>
<td>SSD I/O</td>
<td>50–150 μs</td>
<td>1.5–4 days</td>
<td>100000 cycles</td>
</tr>
<tr>
<td>Rotational disk I/O</td>
<td>1–10 ms</td>
<td>1–9 months</td>
<td></td>
</tr>
<tr>
<td>Internet packet: San Francisco to Europe and back</td>
<td>150 ms</td>
<td>~10 years</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="classic-von-neuman-computer">classic von neuman computer</h2>
<p><img alt="image.png" src="https://pub-150e39e3c65c4688a57a2770a98f3fa5.r2.dev/class_notes/CSE142/cache/image.png" /></p>
<h3 id="memory-wall">memory wall</h3>
<blockquote>
<p>Memory performance improved at a much slower rate than processor performance.
</p>
</blockquote>
<h2 id="memory-access-is-expensive">Memory access is expensive</h2>
<ul>
<li>if a non memory operation uses 1 cycle, a memory access opeeration would take ~ 500 cycles</li>
</ul>
<blockquote>
<p>caching reduce CPI by access faster memories
</p>
</blockquote>
<h3 id="memory-techs">memory techs</h3>
<ol>
<li>registers: 0.5 cycles (0.5ns)</li>
<li>SRAM (static random access memory): 4-50 cycles (<strong>cache</strong>)</li>
<li>DRAM: 400 cycles</li>
<li>NAND (SSD): 100000 cycles</li>
<li>hard disk</li>
</ol>
<h3 id="calculate-for-cpi">calculate for CPI:</h3>
<p><img alt="image.png" src="https://pub-150e39e3c65c4688a57a2770a98f3fa5.r2.dev/class_notes/CSE142/cache/image%201.png" /></p>
<p>for 100000 k iterations, there are:</p>
<ol>
<li>500 + 1 + 1 + 1 = 503 cycles per each iteration</li>
</ol>
<p>there are 100000 * 503 = 50300000 CPI  in total, and there are 3 + 3 + 2 + 4*100000 + 2 = 400010 dynamic instructions, so CPI = <span class="arithmatex">\(50300000 / 400010 = 125.7\)</span> (or 503 / 4)</p>
<h3 id="optimize-memory-access-by-parallelism-amdahls-law">optimize memory access by parallelism  (Amdahl’s law)</h3>
<ul>
<li>we can only optimize the part x where it is parallezable. in this case,</li>
</ul>
<p><img alt="image.png" src="https://pub-150e39e3c65c4688a57a2770a98f3fa5.r2.dev/class_notes/CSE142/cache/image%202.png" /></p>
<ul>
<li>since k is large, we can assume iterations takes the entire execution time</li>
<li>inside each iteration, <code>addl (%rax) %edx</code> is a memory access operation and its result edx is not used for later calculations, therefore it can be paralleized</li>
<li>therefore,</li>
</ul>
<div class="arithmatex">\[
x = \frac{\text{CPI of part that can be paralleized}}{\text{CPI total per iteration}} = \frac{500}{503} =  0.994
\]</div>
<aside>
💡

NOT SURE

</aside>

<h1 id="memory-access-patterncache">Memory access pattern/Cache</h1>
<blockquote>
<p>caching reduce CPI by access faster memories
</p>
</blockquote>
<h3 id="cache_1">cache</h3>
<ol>
<li>faster than main memory</li>
<li>usually made out of SRAM</li>
</ol>
<aside>
💡

a hash map cache table stores the value in a virtual memory location 

</aside>

<p><img alt="image.png" src="https://pub-150e39e3c65c4688a57a2770a98f3fa5.r2.dev/class_notes/CSE142/cache/image%203.png" /></p>
<p><strong>3 layers of cache in modern computer</strong> </p>
<p>with 64 bytes per cache line</p>
<p>a cache is small, but close to processor</p>
<p>memory access will try go to cache first </p>
<p><strong>cache hit</strong></p>
<p>cache miss <strong>-</strong> data is not in cache </p>
<h3 id="multi-level-cache">multi level cache</h3>
<p>last level cache - L3, LLC, the cache just before main cache </p>
<p>L1 (cloest to processor), L2, l3</p>
<aside>
💡

cache only manipuate cache lines

where a cache line’s address is always a multiple of cache line size,

</aside>

<aside>
💡

purpose of memory hierachy: 
1. provide fast memory access in most cases
2. hide the slowness of DRAM from application (by caching in SRAM )
3, exploit locality to improve performance 

</aside>

<h3 id="memory-locality">memory locality</h3>
<p>based on: future memory access is predictable based on past access</p>
<p><strong>spatial locality -</strong> programs tend to access memory close in address to the data they have been accessed recently</p>
<ul>
<li>will divide an array into multiple data chunks, whenever a data in the chunk is loaded the entire chunk will be loaded</li>
</ul>
<p><strong>temporal locality -</strong> programs tend to access same data repeatedly</p>
<ul>
<li>if run out of space, evict cache lines based on evication policy. new cache is always added</li>
</ul>
<h3 id="calculate-cache-line">calculate cache line</h3>
<p><strong>cache line:</strong>  smallest unit of data that can be transferred between main memory and cache, consists of multiple consecutive bytes (spatial locality)</p>
<p><strong>cache address:</strong> refer to location of memory block within a cache</p>
<div class="arithmatex">\[
\text{cache line addr of A} = A - A \text{ mod } 2^k
\]</div>
<ul>
<li>where 2^k is the cache line size</li>
</ul>
<p><img alt="image.png" src="https://pub-150e39e3c65c4688a57a2770a98f3fa5.r2.dev/class_notes/CSE142/cache/image%204.png" /></p>
<p><strong>unified cache</strong> : A cache that holds both instructions and data.</p>
<aside>
💡

since 1 byte = 2 hex, 16 bytes cache line = 4 ints  
each cache line starts with address 0x…0, eg: 0x1000, 0x1020. 

</aside>

<hr />
<p>example: </p>
<p><img alt="image.png" src="https://pub-150e39e3c65c4688a57a2770a98f3fa5.r2.dev/class_notes/CSE142/cache/image%205.png" /></p>
<ul>
<li>each element in the students array is unsigned int of 32 bits, or 4 bytes.</li>
<li>therefore, <span class="arithmatex">\(addr(student[i]) = 0x1004 + 4i\)</span></li>
<li>suppose the cache lines is 16 bytes, the cache line number is</li>
</ul>
<div class="arithmatex">\[
\text{cache line idx} = \frac{\text{memory address}}{\text{cache line size}}
\]</div>
<ul>
<li>since cache line is 16 bytes, therefore, there is 4 students object stored in each cache line,</li>
<li>since the bit offset is 4 (2 ^ 4 == 16), therefore, the first 3 hex number defines a set,</li>
<li>therefore, 0-2 (0x1004 - 0x100c), 3-6 (0x1010 - 0x101C), 7 - 10  is stored in the same cache line. since within each set, the first 3 hex digit is same.</li>
<li>so answer is D</li>
</ul>
<h3 id="cache-as-hashtable">Cache as hashtable:</h3>
<ul>
<li>to ensure O(1) access and store time</li>
<li>use tags to acces the cache line, and then use index bits to access a specific location.</li>
</ul>
<p><img alt="image.png" src="https://pub-150e39e3c65c4688a57a2770a98f3fa5.r2.dev/class_notes/CSE142/cache/image%206.png" /></p>
<aside>
💡

hashtable: group by : index bits → tag → memory contents (as k bit offset)

cache line : tag → index → offset

</aside>

<p>A <strong>64-bit address</strong> is divided into three parts:</p>
<ol>
<li><strong>Offset (k-bit offset)</strong><ul>
<li>Determines <strong>which byte</strong> within a cache line to access.</li>
<li>If the <strong>cache line size = 2^k bytes</strong>, the offset is <strong>k bits</strong>.</li>
<li>Example: For <strong>16-byte ( 2^4 ) cache lines</strong>, the <strong>offset = 4 bits</strong>.</li>
</ul>
</li>
<li>
<p><strong>Index (Log(cache lines) index bits)</strong></p>
<blockquote>
<p>The portion of an address that determines the possible locations of a cache line in the cache.</p>
<ul>
<li>Selects <strong>which cache line</strong> to use.</li>
<li>If there are <strong>2^n cache lines</strong>, the index requires <strong>n bits</strong>.</li>
<li>Example: If the cache has <strong>256 ( 2^8 ) cache lines</strong>, the <strong>index = 8 bits</strong>.</li>
</ul>
</blockquote>
<p><aside>
💡</p>
<p>note: if use N-way set associative, the total number of indices = total number of associative sets = 2^n / N</p>
</aside>
</li>
<li>
<p><strong>Tag (Remaining bits)</strong></p>
<ul>
<li>Used to <strong>differentiate memory blocks</strong> mapped to the same cache index.</li>
<li>The CPU <strong>compares the tag</strong> of the requested address with the stored tag in the cache.</li>
<li>Example: If <strong>64-bit addresses</strong>, and offset + index uses <strong>12 bits</strong>, then <strong>tag = 64 - 12 = 52 bits</strong>.</li>
</ul>
</li>
</ol>
<aside>
💡

for example, a memory location `1100 1010 1111 1110 1011 1010 1011 1110` stored at the cache set `11` = 3, at block by tag `1100 1010 1111 1110 1011 1010 1011`, and the `10` = 2 byte within that block

</aside>

<h3 id="when-accessing-memory">When accessing memory:</h3>
<ol>
<li>The <strong>Index</strong> selects the cache line.</li>
<li>The <strong>Tag</strong> stored in that cache line is <strong>compared</strong> with the tag from the address.</li>
<li>If the tags <strong>match</strong> → <strong>Cache Hit</strong> (data is retrieved from cache).If the tags <strong>don’t match</strong> → <strong>Cache Miss</strong> (data is fetched from main memory).</li>
</ol>
<aside>
💡

always loads the entire block tag represents to the cache. 

</aside>

<h2 id="cache-metrics">Cache Metrics</h2>
<div class="arithmatex">\[
\text {hit rate} = \frac{\text{number of hits}}{\text{number of accessses}}
\]</div>
<div class="arithmatex">\[
\text {miss rate} = \frac{\text{number of misses}}{\text{number of accessses}}
\]</div>
<p><strong>memory latency</strong>:  The time it takes to access a cache or main memory.</p>
<p><strong>Memory bandwidth</strong>: The number of bytes per second that can be transferred to or from a cache or memory.</p>
<h3 id="total-cpi-with-cache-misses">total CPI with cache misses</h3>
<hr />
<p>example : </p>
<p>In the absence of cache misses, processor takes an average of 2 cycle(s) to execute an instruction. If an L1 cache miss occurs, it takes an <em>additional</em> 18 cycles to access the L2.</p>
<p>On this processor, for a particular program an L1 miss rate of 30%. 5% of the instructions access memory.</p>
<p>What is the total CPI for the program?</p>
<div class="arithmatex">\[
2 + 0.05*0.3 * 18=2.27
\]</div>
<h3 id="type-of-cache-misses">type of cache misses</h3>
<blockquote>
<p>3Cs: Compulsory, Capacity, Conflict misses
</p>
</blockquote>
<p><strong>compulsory misses:</strong> Misses that occur because the cache has not been accessed
before</p>
<ul>
<li>reduce cache line size (therefore fetches less data on miss, and does not exploit spatial locality) increase compulsory misses</li>
</ul>
<p><strong>capacity misses:</strong>  Misses that occur because the cache is too small.</p>
<ul>
<li>Misses that are not compulsory and would still occur in fully-associative cache with the same number and size of cache lines</li>
</ul>
<p><strong>conflict misses:</strong> Misses that occur because the indexing scheme and eviction policy
caused a cache line to be evicted.</p>
<ul>
<li>Definition: Misses that are not compulsory and wou<strong>ld not occur in a
fully-associative cac</strong>he the same number and size of cache lines</li>
<li>increase cache line size (thus decrease the number of cache blocks and therefore same access pattern compete for fewer blocks) and  reduce associativity increase conflict misses</li>
<li><strong>fully associative</strong> eliminate all conflict misses, but much more expensive</li>
</ul>
<hr />
<p>example</p>
<p><img alt="image.png" src="https://pub-150e39e3c65c4688a57a2770a98f3fa5.r2.dev/class_notes/CSE142/cache/image%207.png" /></p>
<p><img alt="image.png" src="https://pub-150e39e3c65c4688a57a2770a98f3fa5.r2.dev/class_notes/CSE142/cache/image%208.png" /></p>
<ul>
<li>0 : store. so we have index: 1, tag = 001,  compulsory miss</li>
<li>1: load, so store cache line index = 0, tag = 000, compulsory miss</li>
<li>2: store, index = 1, tag = 0, evict previous, compulsory (since it is first time access)</li>
<li>3: store, index = 1, tag = 1, evict previous, capacity miss (even it is fully associatetive, we cannot avoid this miss)</li>
<li>4: load, index = 1, tag = 1, cache hit</li>
<li>5: index = 1, tag = 0, conflict miss, because if we have fully associative cache, then result from 2, 3 will all be cached and this will be a cache hit.</li>
<li>6: index = 0, tag = 0, cache hit</li>
<li>7: index = 0, tag = 1, compulsory miss, first time access this</li>
</ul>
<h1 id="eviction">eviction</h1>
<blockquote>
<p>occurs when we need to make space in cache for a new line
</p>
</blockquote>
<p><strong>eviction policy -</strong>  determines when to evict a cache line</p>
<ul>
<li>in this course, always make room for new cache line</li>
<li>has impact on cache hit rate</li>
</ul>
<p><strong>writeback -</strong> when a cache line is evicted and it is dirty (modified)</p>
<ul>
<li>cache write it back to next layer of memory hierachy  if dirty</li>
<li>load the cache line from the next level of memory hierachy</li>
</ul>
<h2 id="evication-policies">Evication policies</h2>
<h3 id="least-recently-used-lru"><strong>least recently used (LRU):</strong></h3>
<ul>
<li>the simple and good solution, evict the cache line that was used farthest in the past</li>
<li>HOWEVER, it is hard to implement in hardware</li>
</ul>
<h3 id="random-replacement-policy">random replacement policy:</h3>
<blockquote>
<p>evicts a block chosen at random, regardless of usage.
</p>
</blockquote>
<h3 id="first-in-first-out-fifo-replacement-policy">First In First Out (FIFO) replacement policy</h3>
<blockquote>
<p>policy evicts the block that was loaded into the cache the earliest.
</p>
</blockquote>
<hr />
<p>example: (suppose only temporal cache)</p>
<p><img alt="image.png" src="https://pub-150e39e3c65c4688a57a2770a98f3fa5.r2.dev/class_notes/CSE142/cache/image%209.png" /></p>
<p>suppose the cache has 4 cache lines, 4 bytes per line, 32 bits addresss and 28 tag bits with 2 bit index and 2 bit offset</p>
<p>so this will perform: </p>
<p><img alt="image.png" src="https://pub-150e39e3c65c4688a57a2770a98f3fa5.r2.dev/class_notes/CSE142/cache/image%2010.png" /></p>
<ol>
<li>first try to load A[0] with tag (the higher address bits &gt; 4, in this case, 0-3 bits). so tag = 0001, then store the index bits (4 elements per cache line), so store 00 as 0. </li>
<li>then cache miss B[0] with tag = 0011 and index bits = 00</li>
<li>similarly, store A[1], B[1]. <strong>those are compulstory cache misses</strong></li>
<li>and second run all hits cache, therefore, hit rate is 50%</li>
</ol>
<p><img alt="image.png" src="https://pub-150e39e3c65c4688a57a2770a98f3fa5.r2.dev/class_notes/CSE142/cache/image%2011.png" /></p>
<hr />
<p>suppose there is only  2 lines in cache, then the cache hit rate is 0%, because in our case, when run out of cache lines, it will replace the first one inserted . <strong>cache miss due to capacity</strong></p>
<hr />
<p><strong>suppose with spatial locality and index bits = 1, offset bits = 3, and #cache lines = 4,</strong> this time each cache line should have 2 elements (A[0], B[0]), and they should loaded together. in this case,:</p>
<ul>
<li>miss when laod A[0], a[1],A[0] is loaded to cache</li>
<li>miss when load B[0], B[0], B[1] is loaded to cache</li>
<li>all later 6 access hits cache</li>
<li>therefore hit rate is 75%</li>
</ul>
<hr />
<p>same hit rate if loaded reversely (A[1]), since the entire block is loaded no matter what</p>
<hr />
<p>suppose k (the number of iterations) for both loop increase to 4, and index bits = 1, offset bits = 3. then the cache hit rate is </p>
<ul>
<li>cache miss A[0] → load A[0], A[1]</li>
<li>cache miss B[1] → load B[0], B[1]</li>
<li>cache hit A[1], B[1]</li>
<li>cache miss A[2] → load A[2] A[3] in place of A[0] A[1]</li>
<li>cache miss B[2] →load B[2] B[3] in place of B[0] B[1]</li>
<li>cache hit A[3], B[3]</li>
<li>repeat again</li>
</ul>
<p>therefore, the hit rate is 50%</p>
<hr />
<p><a href="https://www.notion.so/more-cache-simulations-19e81cb71af0809b99abc6abcdc51a83?pvs=21">more cache simulations</a></p>
<h1 id="cache-optimization-techniques">Cache optimization Techniques</h1>
<p><strong>working set:</strong> data the programmer currently working on</p>
<p><strong>operational definition:</strong> smallest cache size for which there are few capacity misses</p>
<h3 id="direct-mapped-cache">direct-mapped cache</h3>
<blockquote>
<p>each memory address maps to exactly one cache line.
</p>
</blockquote>
<hr />
<p>suppose 2 cache lines, 1 index bit, which of following has higher cache hit rate?</p>
<p><img alt="image.png" src="https://pub-150e39e3c65c4688a57a2770a98f3fa5.r2.dev/class_notes/CSE142/cache/image%2012.png" /></p>
<p>original: 50%</p>
<p>A: 50%</p>
<p>B: 75% , note: cache miss A[0], cache hit A[0], A[1], A[1]. repeat for all </p>
<p>C: 50%</p>
<p><strong>loop interchage / renesting:</strong> </p>
<p>the working set size: 16 bytes = 4 ints * 4 bytes per int +  4 ints * 4 bytes per int</p>
<ul>
<li>Although <code>A[]</code> and <code>B[]</code> <strong>together take 32 bytes in total</strong>, the <strong>loop splitting technique</strong> ensures that <strong>only part of them is in use at a time</strong>.</li>
<li>The inner loop operates on <code>A[j]</code> and <code>B[j]</code>, keeping memory usage lower at each step.</li>
<li>This <strong>reduces the active working set size</strong> at any given moment.</li>
</ul>
<hr />
<p>loop renesting + loop spliitng:</p>
<p><img alt="image.png" src="https://pub-150e39e3c65c4688a57a2770a98f3fa5.r2.dev/class_notes/CSE142/cache/image%2013.png" /></p>
<p>we only need 1 cache line with 1 content (one content in a cache line)</p>
<ol>
<li>miss A[0], hit A[0]</li>
<li>….</li>
</ol>
<p>so 50%hit rate</p>
<h3 id="cache-conflicts">Cache conflicts</h3>
<ul>
<li>there is room for cache, but indexing is too restrictive, causing coliision in hash table</li>
</ul>
<p><img alt="image.png" src="https://pub-150e39e3c65c4688a57a2770a98f3fa5.r2.dev/class_notes/CSE142/cache/image%2014.png" /></p>
<ul>
<li>in this case, since index biits is 1,  we only take the 4th bit for indexing. however, look at each case:<ul>
<li>16 = <code>0001 0000</code> 4th bit is 0</li>
<li>20 = <code>0001 0100</code> 4th  bit is 0</li>
<li>…</li>
<li>notice all 4th bit is zero, therefore, all index is 0, and therefore only 1 content for each tag. so they can only use one cache line. therefore, all cache would have the same index, so all will stuck in the same cache line, and not use anything else. therefore, each cache is overwritten. so no cache hit</li>
</ul>
</li>
</ul>
<h2 id="associativity-fully-associative-cache">associativity, fully associative cache</h2>
<aside>
💡

the fully associative cache does not use **index,** cache line can live anywhere. but the cache needs to search everywhere. associate cache is expensive since needs to compare all stored caches 

</aside>

<ul>
<li>does not use index, but require to search all cache lines for matched tags</li>
<li>allows to store multiple blocks in a cache set simutaneously</li>
<li><strong>fully associative cache eliminate conflict misses</strong></li>
</ul>
<h3 id="cache-with-associativity">cache with associativity</h3>
<p><img alt="image.png" src="https://pub-150e39e3c65c4688a57a2770a98f3fa5.r2.dev/class_notes/CSE142/cache/image%2015.png" /></p>
<ul>
<li>suppose associativity  = 2, which means 2 of the cache lines do not use index but search all associated cache lines when tag is inquered</li>
<li>therefore, first cacheline would store A[0], A[1], second would store B[0], B[1]. the first A[0], B[0] are compulsive misses, others are all cache hits</li>
</ul>
<h2 id="hybrid-associative-cache-n-way-cache">hybrid associative cache (N-way cache)</h2>
<ul>
<li>the index becomes the index of an associative set. an associated set have N cachelines, and they are associated.</li>
<li>and  we can implement LRU evication within a set</li>
</ul>
<p><img alt="image.png" src="https://pub-150e39e3c65c4688a57a2770a98f3fa5.r2.dev/class_notes/CSE142/cache/image%2016.png" /></p>
<hr />
<p><img alt="image.png" src="https://pub-150e39e3c65c4688a57a2770a98f3fa5.r2.dev/class_notes/CSE142/cache/image%2017.png" /></p>
<ul>
<li>although index bit are all 0. all elements are cache in the first associative set.</li>
</ul>
<hr />
<p><img alt="image.png" src="https://pub-150e39e3c65c4688a57a2770a98f3fa5.r2.dev/class_notes/CSE142/cache/image%2018.png" /></p>
<h3 id="prefetching">prefetching</h3>
<ul>
<li>bring data into the cache before its requested</li>
<li><code>prefetch (%eax)</code></li>
</ul>
<h1 id="cache-access-behavior-plot">Cache access behavior plot</h1>
<p><img alt="In this program we linearly access an array of memory of size 2^N bytes (2^(N-2) integers). We count the total time." src="https://pub-150e39e3c65c4688a57a2770a98f3fa5.r2.dev/class_notes/CSE142/cache/image%2019.png" />
In this program we linearly access an array of memory of size 2^N bytes (2^(N-2) integers). We count the total time.</p>
<p><img alt="image.png" src="https://pub-150e39e3c65c4688a57a2770a98f3fa5.r2.dev/class_notes/CSE142/cache/image%2020.png" /></p>
<h1 id="virtual-memory">virtual memory</h1>
<h3 id="address-space">address space</h3>
<blockquote>
<p>each program runs as if it has its own memory. in 64 bits machine, address space should be 2^64 bytes.
</p>
</blockquote>
<p>however, we can allocate more memory space than the entire physical space if we dont operation on them. this is virtualization </p>
<h3 id="virtualization">virtualization</h3>
<blockquote>
<p>taking a physical resource (memory) and make it appear to behave differently than it does, usually more plentiful (eg: an program can have &gt;42TB address space on 16GB of memory)
</p>
</blockquote>
<p>it takes limited physical memory and use it to build nice and easy address management spaces </p>
<h3 id="virtual-to-physical-mapping">virtual to physical mapping</h3>
<ul>
<li>memory virtualization works on pages, ~4KB</li>
<li>each  process has a page table to store virtual to physical mapping for address space<ul>
<li>and permission to CRUD memory</li>
</ul>
</li>
<li>programs can only operates on virtual addresses</li>
</ul>
<aside>
💡

page table is a tree, with a depth fixed to 5 levels in latest intel CPUs. best case **memory translation** 20 cycles

</aside>

<h2 id="page">page</h2>
<blockquote>
<p>A <strong>page</strong> is a <strong>fixed-sized block of memory</strong> used in a <strong>virtual memory system</strong>. It is the <strong>basic unit of data transfer</strong> between <strong>RAM (physical memory)</strong> and <strong>storage (disk/SSD)</strong>. Pages allow the <strong>operating system (OS)</strong> to efficiently manage memory and implement <strong>paging-based virtual memory</strong>.</p>
<ul>
<li>every process has a single page table</li>
</ul>
</blockquote>
<h3 id="translation-lookaside-buffer-tlb">translation lookaside buffer (TLB)</h3>
<ul>
<li>The TLB is usually pretty small and highly (sometimes fully) associative.</li>
<li>The TLB lookup has to complete before instruction can finish executing.<ul>
<li>To enforce memory protection.</li>
<li>Illegal accesses cause SIGSEGV</li>
</ul>
</li>
<li>The hit rate needs to be high</li>
</ul>
<blockquote>
<p>page: a unit of address translation
</p>
</blockquote>
<aside>
💡

typically, L1 cache has 100 entries of TLB, L2 has 1000 entries

</aside>

<p><img alt="image.png" src="https://pub-150e39e3c65c4688a57a2770a98f3fa5.r2.dev/class_notes/CSE142/cache/image%2021.png" /></p>
<ul>
<li>TLB usually have high hits, .<ul>
<li>hits are fast</li>
<li>dont impact L1 time</li>
<li>on miss, CPU asyncly performs a lookup in the OS manageed page table</li>
<li>the table is in memory, so further cache misses are possible</li>
</ul>
</li>
<li>if L1 is too small<ul>
<li>add L2, L3 TLB (unrelated to L2, L3 cache)</li>
<li>adopt even larger page sizes</li>
</ul>
</li>
</ul>
<h3 id="page-offset">page offset</h3>
<blockquote>
<p>specifies the exact byte location within a range
</p>
</blockquote>
<div class="arithmatex">\[
\text{page offset bits} = \log_2(\text{page size bytes})
\]</div>
<h3 id="virtual-page-number-vpn">virtual page number (VPN)</h3>
<blockquote>
<p>the index of a virtual page in a virtual address space
The VPN is used in conjunction with the <strong>page table</strong> to look up the corresponding <strong>physical page</strong>.
</p>
</blockquote>
<div class="arithmatex">\[
VPN = \text{total virtual page address bits} - \text{page offset bits}
\]</div>
<ul>
<li>in a 32 bit virtual address space with 4KB pages, VPN is 20bits, <span class="arithmatex">\(= 32 - \log_2(4*1024) = 32 - 12 = 20\)</span></li>
</ul>
<h3 id="physical-page-number-ppn">physical page number (PPN)</h3>
<blockquote>
<p>The <strong>PPN (Physical Page Number)</strong> represents the <strong>index of a physical page</strong> in the physical memory.</p>
<ul>
<li>The OS and <strong>Memory Management Unit (MMU)</strong> use the VPN to find the corresponding <strong>PPN</strong> in the <strong>page table</strong>.</li>
<li>The <strong>PPN + Page Offset</strong> forms the <strong>physical address</strong>.</li>
<li>In a <strong>32-bit physical address space</strong> with <strong>4KB pages</strong>, the PPN consists of <strong>20 bits</strong>.</li>
</ul>
</blockquote>
<div class="arithmatex">\[
PPN = \text{physical address bits} - \log_2(\text{page size bytes})
\]</div>
<h3 id="convert-from-vpn-to-ppn">convert from VPN to PPN</h3>
<div class="arithmatex">\[
\text{virtual address} = VPN + \text{page offset}\\
\text{physical address} = PPN + \text{page offset}
\]</div>
<ul>
<li>PPN has a smaller range compare to VPN</li>
<li>VPN is mapped to PPN, but not reverse versa. it is a one way map direction from VPN to PPN. there could be multiple VPN that points to same PPN</li>
<li>the page offste of PPn and VPN is same</li>
</ul>
<hr />
<hr />
<p><img alt="image.png" src="https://pub-150e39e3c65c4688a57a2770a98f3fa5.r2.dev/class_notes/CSE142/cache/image%2022.png" />
the page offset bits = log_2 (4*1024) = 12, therefore, the lower 3 hex value is ignored (because page offset is ignored). then, since the remaiing <code>ce66e</code> ≠ <code>ce66f</code> , they belong to different page </p>
<hr />
<p>Your program has a TLB miss rate of 0.03% and a cache miss rate of 0.1%.
TLB misses add 12 cycles to the execution time of an instruction while cache misses add 11 cycles to the execution time of your program.</p>
<p>You have to decide between optimizing to reduce cache misses or TLB misses. Which should you optimize for?</p>
<p>(a)Cache misses</p>
<p>(b)TLB misses</p>
<p>A, because cache miss has higher miss rate? </p>
<hr />
<p>example: </p>
<p><img alt="image.png" src="https://pub-150e39e3c65c4688a57a2770a98f3fa5.r2.dev/class_notes/CSE142/cache/image%2023.png" />
- since the array start address is 4kb-aligned. therefore, address intervals are: <code>0-4kb</code>, <code>4kb-8kb</code>
- each element is 8 bytes, in a single page of <code>4kb</code>, therfore, there are 4096 / 8 = 512 elements.
- therfore, element 1 is in second page, while element 2 is in first page, not in the same page</p>
<h1 id="summary">summary</h1>
<ul>
<li>bigger cache<ul>
<li>will generally have higher hit rates, lower cache miss</li>
<li>let cache exploit spatial locality,</li>
<li>… reduce compulsive misses</li>
</ul>
</li>
<li>increase associativity<ul>
<li>reduce conflict misses</li>
</ul>
</li>
<li>prefetcher<ul>
<li>reducer compulsory misses</li>
</ul>
</li>
<li><strong>ideally, cache should be large enough to fit all data in working set</strong></li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../" class="md-footer__link md-footer__link--prev" aria-label="Previous: Overview">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Overview
              </div>
            </div>
          </a>
        
        
          
          <a href="../cache_aware_programming/" class="md-footer__link md-footer__link--next" aria-label="Next: Cache Aware Programming">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Cache Aware Programming
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      © 2021 Zilin Liu
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/in/zilin-l-17b71022b/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "content.code.select", "content.code.annotate", "content.footnote.tooltips", "navigation.footer", "navigation.top", "toc.integrate"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../../../js/katex.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>